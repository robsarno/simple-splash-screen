<!DOCTYPE html>
<html lang="it">
  <head>
    <title>Parrocchia San Giacomo Maggiore Apostolo • Sedrina</title>
    
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Parrocchia San Giacomo Maggiore Apostolo di Sedrina (BG)">
    <link rel="icon" href="img/favicon.ico"/>
     
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/player.css">
    <link rel="stylesheet" href="css/loader.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">

    <!-- Bootstrap / FontAwesome CSS -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  </head>
  <body>
    <div class="loader-wrapper">
      <div class="loader-inner">
        <div class="loader-line-wrap">
          <div class="loader-line"></div>
        </div>
        <div class="loader-line-wrap">
          <div class="loader-line"></div>
        </div>
        <div class="loader-line-wrap">
          <div class="loader-line"></div>
        </div>
        <div class="loader-line-wrap">
          <div class="loader-line"></div>
        </div>
        <div class="loader-line-wrap">
          <div class="loader-line"></div>
        </div>
      </div>
    </div>

    <div id="fb-root"></div>
    <script async defer src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.2"></script>
    <div class="container-fluid">
      <div class="row">
        <div class="col-xl-6 left">
          <div class="effetto">
            <img src="img/logo.png" alt="Logo Parrocchia" class="logo-effetto">
          </div>
          <img src="img/logo.png" alt="Logo Parrocchia" class="logo">
          <div class="row titolo">
            <div class="col-xl-12">
              <h1 style="font-weight: 500;">Parrocchia<br>San Giacomo Maggiore Apostolo</h1>
              <h5>Sedrina</h5>
              <p class="sub">Stiamo lavorando per la creazione di un sito web per poter gestire al meglio la comunicazione con tutti gli abitanti di Sedrina.
                <br>Pubblicazioni, articoli, foto, notizie e molto altro, tutto accessibile e ben organizzato in un unico posto.
              </p>
              <p class="light">Il traguardo è ancora lontano, ma non manca molto.<br>Su questa pagina puoi ascoltare la radio parrocchiale (in fondo se usi uno smartphone) e seguire la diretta video Facebook (se attiva).</p>
            </div>
          </div>
        </div>

        <div class="col-xl-6 right"  id="particles-js">
          <div class="row">
            <div class="col-xl-12 fb-video-cont">
              <h4 style="margin-bottom: 1rem;" id="live-text">-</h4>
              <iframe id="fb-video"
                src=""
                style="border:none;overflow:hidden;width:100%" scrolling="no" frameborder="0"
                allowTransparency="true" allowFullScreen="true" title="Diretta Facebook Parrochia Sedrina">
              </iframe>
              <h6 id="next-live" style="margin-top:8px">Prossima diretta: -</h6>
            </div>
          </div>
          <div class="row">
            <div class="col-xl-12">
              <div id="app-cover">
                <div id="player">
                    <div id="player-track" class="active">
                        <div id="connection">---</div>
                        <div id="radio">---</div>
                    </div>
                    <div id="player-content">
                        <div id="album-art">
                            <img src="img/album-art.jpg" alt="album cover" class="active">
                        </div>
                        <div id="player-controls">
                            <div class="control">
                                <div class="button">
                                  <div id="mute-button"><i class="fas fa-volume-up" title="Disattiva audio"></i></div>
                                  <div id="unmute-button" style="display: none;"><i class="fas fa-volume-mute" title="Attiva audio"></i></div>
                                </div>
                            </div>
                            <div class="control">
                                <div class="button" id="play-pause-button">
                                  <div id="play-button"><i class="fas fa-play" title="Avvia riproduzione"></i></div>
                                  <div id="pause-button" style="display: none;"><i class="fas fa-pause" title="Ferma riproduzione"></i></div>
                                </div>
                            </div>
                            <!--div-- class="control">
                                <div class="button">
                                  <div id="sync-button"><i class="fas fa-step-forward" title="Sicronizza riproduzione con la radio"></i></div>
                                </div>
                            </!--div-->
                        </div>
                    </div>
                </div>
              </div>
            </div>
          </div>
          <!--
          <div class="row">
            <div class="col-12">
              <a name="" id="" class="btn link " href="#" role="button">Radio parrocchiale</a>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <a name="" id="" class="btn link " href="#" role="button">Video diretta</a>
            </div>
          </div>
        </div>
      -->
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/js/all.min.js" integrity="sha256-qM7QTJSlvtPSxVRjVWNM2OfTAz/3k5ovHOKmKXuYMO4=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  
    <script src="js/player.js"></script>
    <script>
      $(window).on("load",function(){
        $(".loader-wrapper").fadeOut("slow");
      });

      $.ajax({
        type: 'GET',
        //headers: {"X-Requested-With": "XMLHttpRequest"},
        //crossDomain: true,
        url:'https://radio-video-check-dot-first-project-272018.appspot.com/',
        //xhrFields: {withCredentials: true },
        success: function(output, status, xhr){
            //console.log(xhr.getResponseHeader("Content-Length"))
            //console.log("response "+output)
            var data = output.split(";")
            //radio setup
            if(data[0]=="play mp3"){ //stream is not online
                connection.html("ULTIMA REGISTRAZIONE")
                connectionText = "ULTIMA REGISTRAZIONE"
                radio.html("RADIO NON ATTIVA")
                initPlayer(trackUrl[1]); //play record
            } else if(data[0]=="stream online") {
                connection.html("CONNESSO")
                connectionText = "CONNESSO"
                radio.html("RADIO ATTIVA")
                initPlayer(trackUrl[0]); //play stream
            } else {
                connection.html("NON CONNESSO")
                connectionText = "NON CONNESSO"
                radio.html("RADIO NON ATTIVA")
            }

            //video setup
            $("#fb-video").attr("src", "https://www.facebook.com/plugins/video.php?href=https%3A%2F%2Fwww.facebook.com%2Fparrocchiasangiacomosedrina%2Fvideos%2F"+data[1]+"%2F&show_text=0&width=560")
            //console.log("https://www.facebook.com/plugins/video.php?href=https%3A%2F%2Fwww.facebook.com%2Fparrocchiasangiacomosedrina%2Fvideos%2F"+data[1]+"%2F&show_text=1&width=560")
            $("#live-text").html(data[2])
            $("#next-live").html("Prossima diretta: "+data[3])
        },
        error: function (request, textStatus, errorThrown) {
            console.log(errorThrown)
        }
      });

      document.querySelector('#fb-video').style.height = document.querySelector('#fb-video').clientWidth*9/16+'px'

      const left = document.querySelector('.left');
      const titolo = document.querySelector('.titolo');
      const logoeffetto = document.querySelector('.logo-effetto');

      left.addEventListener('mousemove', (event) => {
        let move = (event.clientX * 0.05) +4;
        let move2 = (event.clientX * 0.02);

        logoeffetto.style.transform = `translateX(${move}px)`;
        titolo.style.transform = `translateX(-${move2}px)`;
      })
    </script>

    <script src="js/particles.js"></script>
    <script>
      particlesJS.load('particles-js', 'assets/particlesjs-config.json', function() {
        console.log('callback - particles.js config loaded');
      });
    </script>
  </body>
</html>